<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kalkulaƒçka</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="calculator" class="standard">
        <!-- Tlaƒç√≠tko pro p≈ôepnut√≠ re≈æimu -->
        <button id="switchModeButton" onclick="switchMode()">P≈ôepnout re≈æim</button>
        
        <!-- Standardn√≠ kalkulaƒçka -->
        <div id="standardMode">
            <input type="text" id="input" placeholder="Zadejte v√Ωpoƒçet">

            <div class="button-grid">
                <button onclick="appendToInput('1')">1</button>
                <button onclick="appendToInput('2')">2</button>
                <button onclick="appendToInput('3')">3</button>
                <button onclick="appendToInput('+')">+</button>
                <button onclick="appendToInput('4')">4</button>
                <button onclick="appendToInput('5')">5</button>
                <button onclick="appendToInput('6')">6</button>
                <button onclick="appendToInput('-')">-</button>
                <button onclick="appendToInput('7')">7</button>
                <button onclick="appendToInput('8')">8</button>
                <button onclick="appendToInput('9')">9</button>
                <button onclick="appendToInput('*')">*</button>
                <button onclick="appendToInput('0')">0</button>
                <button onclick="clearInput()">C</button>
                <button onclick="appendToInput('/')">/</button>
                <button onclick="calculate()">=</button>
                <button onclick="appendToInput('**2')">x¬≤</button>
                <button onclick="appendToInput('**0.5')">‚àö</button>
                <button onclick="appendToInput('/100')">%</button>
                <!-- Tlaƒç√≠tko pro x^n -->
                <button onclick="appendExponent()">x‚Åø</button>
            </div>
        </div>

        <!-- Chemick√° kalkulaƒçka -->
        <div id="chemistryMode" class="hidden">
            <input type="number" id="molarMass" placeholder="Mol√°rn√≠ hmotnost (g/mol)">
            <input type="number" id="amount" placeholder="L√°tkov√© mno≈æstv√≠ (mol)">
            <input type="number" id="concentration" placeholder="Koncentrace (mol/l)">
            <input type="number" id="volume" placeholder="Objem (l)">
            <button id="calculateButton" onclick="calculateChemical()">Vypoƒç√≠tat</button>
            <div id="chemicalResult"></div>
        </div>

        <!-- Historie v√Ωpoƒçt≈Ø -->
        <h3>Historie v√Ωpoƒçt≈Ø:</h3>
        <ul id="historyList"></ul>

        <!-- Zobrazen√≠ aktu√°ln√≠ho ƒçasu -->
        <div id="realTime"></div>

        <!-- Tlaƒç√≠tko pro p≈ôepnut√≠ motivu -->
        <button id="themeToggle" onclick="toggleTheme()">üåì</button>
    </div>

    <script>
        // Funkce pro p≈ôepnut√≠ mezi re≈æimy
        let isStandardMode = true;

        function switchMode() {
            let calculator = document.getElementById('calculator');
            let chemistryMode = document.getElementById('chemistryMode');
            let standardMode = document.getElementById('standardMode');

            if (calculator.classList.contains('standard')) {
                calculator.classList.remove('standard');
                calculator.classList.add('chemical');
                chemistryMode.classList.remove('hidden');
                standardMode.classList.add('hidden');
                localStorage.setItem('mode', 'chemical');
            } else {
                calculator.classList.remove('chemical');
                calculator.classList.add('standard');
                chemistryMode.classList.add('hidden');
                standardMode.classList.remove('hidden');
                localStorage.setItem('mode', 'standard');
            }
        }

        // Funkce pro p≈ôid√°n√≠ hodnoty do vstupn√≠ho pole
        function appendToInput(value) {
            document.getElementById('input').value += value;
        }

        // Funkce pro vymaz√°n√≠ vstupn√≠ho pole
        function clearInput() {
            document.getElementById('input').value = '';
        }

        // Funkce pro v√Ωpoƒçet (standardn√≠ re≈æim)
        function calculate() {
            let input = document.getElementById('input');
            try {
                let result = eval(input.value);
                input.value = result;
                addToHistory(input.value);
            } catch (e) {
                input.value = 'Chyba';
            }
        }

        // Funkce pro p≈ôid√°n√≠ do historie
        function addToHistory(entry) {
            let historyList = document.getElementById('historyList');
            let li = document.createElement('li');
            li.textContent = entry;
            historyList.appendChild(li);
        }

        // Funkce pro v√Ωpoƒçet x^n
        function appendExponent() {
            let base = prompt("Zadejte z√°klad (x):");
            let exponent = prompt("Zadejte exponent (n):");

            if (base !== null && exponent !== null) {
                let result = Math.pow(parseFloat(base), parseFloat(exponent));
                document.getElementById('input').value = result;
                addToHistory(`${base}‚Åø = ${result}`);
            }
        }

        // Funkce pro v√Ωpoƒçet chemick√Ωch v√Ωpoƒçt≈Ø
        function calculateChemical() {
            let molarMass = parseFloat(document.getElementById('molarMass').value);
            let amount = parseFloat(document.getElementById('amount').value);
            let concentration = parseFloat(document.getElementById('concentration').value);
            let volume = parseFloat(document.getElementById('volume').value);
            let chemicalResult = document.getElementById('chemicalResult');

            if (!isNaN(molarMass) && !isNaN(amount)) {
                let weight = molarMass * amount;
                chemicalResult.innerText = 'Hmotnost: ' + weight.toFixed(2) + ' g';
            } else if (!isNaN(concentration) && !isNaN(volume)) {
                let moles = concentration * volume;
                chemicalResult.innerText = 'L√°tkov√© mno≈æstv√≠: ' + moles.toFixed(2) + ' mol';
            } else if (!isNaN(concentration) && !isNaN(volume) && !isNaN(molarMass)) {
                let dilution = concentration * volume * molarMass;
                chemicalResult.innerText = '≈òedƒõn√≠: ' + dilution.toFixed(2) + ' g';
            } else {
                chemicalResult.innerText = 'Neplatn√© vstupy';
            }
        }

        // Funkce pro p≈ôepnut√≠ motivu
        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');
        }

        window.onload = function () {
            let mode = localStorage.getItem('mode');
            let theme = localStorage.getItem('theme');
            if (mode === 'chemical') {
                document.getElementById('calculator').classList.remove('standard');
                document.getElementById('calculator').classList.add('chemical');
                document.getElementById('chemistryMode').classList.remove('hidden');
                document.getElementById('standardMode').classList.add('hidden');
            }
            if (theme === 'dark') {
                document.body.classList.add('dark-mode');
            }
        };
    </script>
</body>
</html>
